{% extends 'base.html' %}
{% load static %}
{% block maincontent %}
<table style="width: 100%">
    <tr class="nadpis">
            <td>
                Stav
            </td>
            <td>
                Čas
            </td>
            <td>
                Trvanie
            </td>
            <td>
                Pozícia
            </td>
            <td>
                Chybu spôsobil
            </td>
            <td>
                Popis chyby
            </td>
            <td>
                Uživateľ
            </td>
            <td>
                Dôvod
            </td>
            <td>
                Opatrenie/Oprava
            </td>
            <td>
                Náhradný diel
            </td>

            <td>
                Uprava
            </td>
            <td>
                Potvrdenie
            </td>
            <td>
                Odstránenie
            </td>

    </tr>
    {% for item in zaznamy %}

            {% if item.schvalena == True %}
                 <tr class="done">
                    <td>
                        vyriešená
                    </td>
            {% elif item.vyriesena == True  %}
                <tr class="approach">
                    <td>
                        vyriešená(čaká na potvrdenie)
                    </td>

            {% else %}
                <tr class="items">
                    <td>
                        nevyriešená
                    </td>
            {% endif %}
            <td>
                {{ item.vznik }}
            </td>
            {% if item.vyriesena%}
                <td>
                    {{ item.trvanie}}
                </td>
                {% else %}
                <td>

                </td>
            {% endif %}
            <td>
                    {{ item.miesto_na_linke.miesto}}
            </td>
            <td>
                    {{ item.sposobena_kym.kym}}
            </td>
            <td>
                   {{ item.popis}}
            </td>
            <td>
                    {{ item.pouzivatel}}
            </td>
            <td>
                    {{ item.typ_chyby.popis}}
            </td>
            <td>
                   {{ item.opatrenie}}
            </td>
            <td>
                    {{ item.nahradny_diel}}
            </td>
            <td>
                <button onclick="presmerovanie('/zaznamy/pridaj', 'GET', '{{ item.id }}')">UPRAVIŤ</button>
            </td>
            <td>
                {% if not item.schvalena and  item.vyriesena == True  %}
                    <button onclick="presmerovanie( '/zaznamy/potvrd', 'GET', '{{ item.id }}')">POTVRDIŤ</button>
                {% endif %}
            </td>
            <td>
                <button  id="myBtn" onclick=" myFunction('{{ item.id }}')">
                   ODSTRÁNIŤ
                </button>
                  <div id="myModal" class="modal">

                                  <!-- Modal content -->
                                  <div class="modal-content">
                                    <span class="close">&times;</span>

                                      Ste si istý, že chcete záznam odstrániť?
                                      <button onclick="presmerovanie( '/zaznamy', 'DELETE')" >
                                          ÁNO
                                      </button>
                                  </div>

                  </div>



            </td>
        </tr>
    {% endfor %}
</table>


{% endblock maincontent %}


{% block footer%}
<br>
<br>
<div class="pridaj" >
    <button onclick="presmerovanie('/zaznamy/pridaj', 'GET', 0)"> Pridaj nový zaznam</button>
</div>


<script>

    var span = document.getElementsByClassName("close")[0];
    var modal = document.getElementById("myModal");

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }

</script>
{% endblock footer%}

